!function(t){formintorjs.define(["admin/models","admin/views","admin/settings","text!admin/templates/builder.html","text!admin/templates/appearance.html","text!admin/templates/polls.html","text!admin/templates/quizzes.html"],function(e,i,r,o,n,a,l){return _.extend(Forminator,e),_.extend(Forminator,i),_.extend(Forminator,r),new(Backbone.Router.extend({app:!1,data:!1,layout:!1,module_id:null,routes:{"builder/:id":"run","poll/:id":"run","nowrong/:id":"run","knowledge/:id":"run",appearance:"run_appearance","appearance/:id":"run_appearance","":"run","*path":"run"},events:{},init:function(){if(!this.data)if(this.app=Forminator.Data.application||!1,this.data=t.extend(!0,{},Forminator.Data.currentForm)||{},"builder"===this.app);else if("poll"===this.app)this.model=new Forminator.Models.Poll(this.data);else{if("knowledge"!==this.app&&"nowrong"!==this.app)return!1;this.model=new Forminator.Models.Quiz(this.data)}},run:function(t){if(this.init(),this.module_id=t,this.maybe_redirect_to_module_id(""))return!1;"builder"===this.app?this.start_builder():"poll"===this.app?this.start_poll():"knowledge"!==this.app&&"nowrong"!==this.app||this.start_quiz()},run_appearance:function(t){if(this.init(),this.app&&"builder"===this.app||this.navigate("",{trigger:!0}),this.module_id=t,this.maybe_redirect_to_module_id("/appearance"))return!1;this.start_appearance()},start_builder:function(){this.update_builder_width()},start_appearance:function(){this.update_builder_width()},start_poll:function(){t(".wpmudev-poll-wizard").empty().html(Forminator.Utils.template(t(a).find("#polls-layout-tpl").html())),this.poll&&this.poll.remove(),this.poll=new Forminator.Views.Polls({model:this.model,el:".forminator-polls-content"})},start_quiz:function(){t(".wpmudev-quiz-wizard").empty().html(Forminator.Utils.template(t(l).find("#quiz-layout-tpl").html())),this.quiz&&this.quiz.remove(),this.quiz=new Forminator.Views.Quizzes({model:this.model,el:".forminator-quizzes-content"})},update_builder_width:function(){var e=t(".forminator-form-wizard"),i=(t("#forminator-wizard-name"),t("#forminator-form-elements"));i.width(),e.width()},get_new_module_url:function(t){if("custom_form"===t){if(!_.isUndefined(Forminator.Data.modules.custom_form.new_form_url))return Forminator.Data.modules.custom_form.new_form_url}else if("poll"===t){if(!_.isUndefined(Forminator.Data.modules.polls.new_form_url))return Forminator.Data.modules.polls.new_form_url}else if("nowrong"===t){if(!_.isUndefined(Forminator.Data.modules.quizzes.nowrong_url))return Forminator.Data.modules.quizzes.nowrong_url}else if("knowledge"===t&&!_.isUndefined(Forminator.Data.modules.quizzes.knowledge_url))return Forminator.Data.modules.quizzes.knowledge_url;return!1},maybe_redirect_to_module_id:function(t){var e=this.app;if("builder"===e&&(e="custom_form"),null!==this.module_id&&!_.isUndefined(Forminator.Data.currentForm)&&_.isUndefined(Forminator.Data.currentForm.form_id)){var i=this.get_new_module_url(e);if(i)return i=new URL(i),i.searchParams.append("id",this.module_id),window.location.href=i.href+"#"+t,!0}return!1}}))})}(jQuery);